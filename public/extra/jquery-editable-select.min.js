/*! jQuery Editable Select - v1.0.2 - https://github.com/indrimuska/jquery-editable-select - (c) 2016 Indri Muska - MIT */
!function(a){a.extend(a.expr[":"],{nic:function(a,b,c,d){return!((a.textContent||a.innerText||"").toLowerCase().indexOf((c[3]||"").toLowerCase())>=0)}}),a.fn.editableSelect=function(b){var c={filter:!0,effect:"default",duration:"fast",onCreate:null,onShow:null,onHide:null,onSelect:null},d=this.clone(),e=a('<input type="text">'),f=a('<ul class="es-list">');switch(b=a.extend({},c,b),b.effects){case"default":case"fade":case"slide":break;default:b.effects="default"}(isNaN(b.duration)||"fast"!=b.duration||"slow"!=b.duration)&&(b.duration="fast"),this.replaceWith(e);var g={init:function(){var c=this;c.copyAttributes(d,e),e.addClass("es-input"),f.appendTo(b.appendTo||e.parent()),d.find("option").each(function(){var b=a("<li>"),d=a(this);b.data("value",d.val()),b.html(d.text()),c.copyAttributes(this,b),f.append(b),a(this).attr("selected")&&e.val(d.text())}),e.on("focus input click",c.show),a(document).on("click",function(b){a(b.target).is(e)||a(b.target).is(f)||c.hide()}),c.initializeList(),c.initializeEvents(),b.onCreate&&b.onCreate.call(this,e)},initializeList:function(){var b=this;f.find("li").each(function(){a(this).on("mousemove",function(){f.find(".selected").removeClass("selected"),a(this).addClass("selected")}),a(this).on("click",function(){b.setField.call(this,b)})}),f.mouseenter(function(){f.find("li.selected").removeClass("selected")})},initializeEvents:function(){var a=this;e.bind("input keydown",function(b){switch(b.keyCode){case 40:a.show();var c=f.find("li:visible"),d=c.filter("li.selected");f.find(".selected").removeClass("selected"),d=c.eq(d.size()>0?c.index(d)+1:0),d=(d.size()>0?d:f.find("li:visible:first")).addClass("selected"),a.scroll(d,!0);break;case 38:a.show();var c=f.find("li:visible"),d=c.filter("li.selected");f.find("li.selected").removeClass("selected"),d=c.eq(d.size()>0?c.index(d)-1:-1),(d.size()>0?d:f.find("li:visible:last")).addClass("selected"),a.scroll(d,!1);break;case 13:f.is(":visible")&&(a.setField.call(f.find("li.selected"),a),b.preventDefault());case 9:case 27:a.hide();break;default:a.show()}})},show:function(){f.find("li").show(),f.css({top:e.position().top+e.outerHeight()-1,left:e.position().left,width:e.outerWidth()});var a=b.filter?f.find("li:nic("+e.val()+")").hide().size():0;if(a==f.find("li").size())f.hide();else switch(b.effects){case"fade":f.fadeIn(b.duration);break;case"slide":f.slideDown(b.duration);break;default:f.show(b.duration)}b.onShow&&b.onShow.call(this,e)},hide:function(){switch(b.effects){case"fade":f.fadeOut(b.duration);break;case"slide":f.slideUp(b.duration);break;default:f.hide(b.duration)}b.onHide&&b.onHide.call(this,e)},scroll:function(b,c){var d=0,e=f.find("li:visible").index(b);f.find("li:visible").each(function(b,c){b<e&&(d+=a(c).outerHeight())}),(d+b.outerHeight()>=f.scrollTop()+f.outerHeight()||d<=f.scrollTop())&&(c?f.scrollTop(d+b.outerHeight()-f.outerHeight()):f.scrollTop(d))},copyAttributes:function(b,c){var d=a(b)[0].attributes;for(var e in d)a(c).attr(d[e].nodeName,d[e].nodeValue);a(c).data(a(b).data())},setField:function(c){return!!a(this).is("li:visible")&&(e.val(a(this).text()),c.hide(),void(b.onSelect&&b.onSelect.call(e,a(this))))}};return g.init(),e}}(jQuery);